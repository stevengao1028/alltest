# -*- coding: utf-8 -*-
import urllib2
import re,json
import requests



def get_data(address):
    url = address
    page_data = []
    # try:
    response = requests.get(url,)
    response.raise_for_status()
    response.encoding = response.apparent_encoding
    html = response.text.encode('utf-8')
    soup = BeautifulSoup(html, 'html.parser')
    print html
    ptn = re.compile('\{.*\}', re.DOTALL)
    rslt = ptn.findall(html)
    print rslt
    print(type(rslt[0]))
    return  rslt[0]
def parse_js(expr):
    """
    解析非标准JSON的Javascript字符串，等同于json.loads(JSON str)
    :param expr:非标准JSON的Javascript字符串
    :return:Python字典
    """
    obj = eval(expr, type('Dummy', (dict,), dict(__getitem__=lambda s, n: n))())
    result = json.dumps(obj)
    return result

x = get_data("http://money.finance.sina.com.cn/quotes_service/api/jsonp_v2.php/IO.XSRV2.CallbackList['yl3d4qagkRhWInMj']/Market_Center.getHQNodeDataNew?page=1&num=50&sort=per_d&asc=0&node=hs_a")

print parse_js(x)
